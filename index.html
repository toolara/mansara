<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mansara Taj - Authentic Chicken Biryani Restaurant in Pokhara | Order Online</title>
    <meta name="description" content="Mansara Taj offers the most authentic Chicken Biryani in Pokhara. Order online for delivery or pickup. Fresh ingredients, traditional recipes, 11% discount on all orders.">
    <meta name="keywords" content="chicken biryani, pokhara restaurant, authentic biryani, food delivery pokhara, nepali cuisine">
    <meta name="author" content="Mansara Taj">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://mansarataj.com/">
    <meta property="og:title" content="Mansara Taj - Authentic Chicken Biryani in Pokhara">
    <meta property="og:description" content="Order the most authentic Chicken Biryani in Pokhara. Fresh ingredients, traditional recipes, 11% discount on all orders.">
    <meta property="og:image" content="https://mansarataj.com/images/og-image.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://mansarataj.com/">
    <meta property="twitter:title" content="Mansara Taj - Authentic Chicken Biryani in Pokhara">
    <meta property="twitter:description" content="Order the most authentic Chicken Biryani in Pokhara. Fresh ingredients, traditional recipes, 11% discount on all orders.">
    <meta property="twitter:image" content="https://mansarataj.com/images/twitter-image.jpg">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    
    <!-- Animation Libraries -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    
    <!-- Preload critical resources -->
    <link rel="preload" href="https://cdn.tailwindcss.com" as="script">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Restaurant",
      "name": "Mansara Taj",
      "description": "Authentic Chicken Biryani Restaurant in Pokhara",
      "url": "https://mansarataj.com",
      "telephone": "+977-9815845376",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Jalparoad, Srijana chowk",
        "addressLocality": "Pokhara",
        "postalCode": "33700",
        "addressCountry": "NP"
      },
      "openingHours": "Mo-Su 10:00-22:00",
      "servesCuisine": ["Indian", "Nepali"],
      "priceRange": "$$",
      "image": "https://mansarataj.com/images/restaurant.jpg",
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.7",
        "reviewCount": "128"
      }
    }
    </script>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <style>
        :root {
            --primary-red: #dc2626;
            --primary-yellow: #fbbf24;
            --primary-dark: #991b1b;
        }
        
        /* Reset and base styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        html, body {
            overflow-x: hidden;
            width: 100%;
            position: relative;
        }
        
        /* Performance optimized animations */
        @media (prefers-reduced-motion: no-preference) {
            html { scroll-behavior: smooth; }
            .nav-link { position: relative; }
            .nav-link::after {
                content: ''; position: absolute; width: 0; height: 2px; bottom: -5px; left: 0;
                background-color: white; transition: width 0.3s ease;
            }
            .nav-link:hover::after { width: 100%; }
            .mobile-menu { transform: translateX(100%); transition: transform 0.3s ease-in-out; }
            .mobile-menu.active { transform: translateX(0); }
            .cart-modal { opacity: 0; pointer-events: none; transition: opacity 0.3s ease; }
            .cart-modal.active { opacity: 1; pointer-events: all; }
            .cart-content { transform: translateY(20px); transition: transform 0.3s ease; }
            .cart-modal.active .cart-content { transform: translateY(0); }
            .menu-item-card { transition: all 0.3s ease; }
            .menu-item-card:hover { transform: translateY(-5px); box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
            .offer-badge { animation: pulse 2s infinite; }
            @keyframes pulse {
                0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); }
            }
            .discount-shine {
                background: linear-gradient(45deg, #dc2626, #fbbf24, #dc2626);
                background-size: 200% 200%; animation: shine 3s ease-in-out infinite;
            }
            @keyframes shine {
                0%, 100% { background-position: 0% 50%; } 50% { background-position: 100% 50%; }
            }
            .loading-spinner {
                border: 3px solid #f3f3f3; border-top: 3px solid var(--primary-red); border-radius: 50%;
                width: 20px; height: 20px; animation: spin 1s linear infinite;
            }
            @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
            .whatsapp-btn { animation: float 3s ease-in-out infinite; }
            @keyframes float {
                0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); }
            }
            .fade-in { opacity: 0; transform: translateY(30px); transition: all 0.6s ease; }
            .fade-in.visible { opacity: 1; transform: translateY(0); }
        }
        
        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
            * { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; }
            html { scroll-behavior: auto; }
        }
        
        .original-price { text-decoration: line-through; color: #9ca3af; font-size: 0.9em; }
        .discounted-price { color: #dc2626; font-weight: bold; }
        .order-status { display: none; }
        .order-status.active { display: block; }
        .status-badge {
            padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: bold;
            display: inline-block; margin-left: 8px;
        }
        .status-pending { background: #fef3c7; color: #d97706; }
        .status-preparing { background: #f3e8ff; color: #7e22ce; }
        .status-ready { background: #dcfce7; color: #15803d; }
        .status-delivered { background: #f1f5f9; color: #64748b; }
        .status-cancelled { background: #fee2e2; color: #dc2626; }
        
        /* Sync Indicator */
        .sync-indicator {
            position: fixed; bottom: 20px; left: 20px; background: #10b981; color: white;
            padding: 8px 16px; border-radius: 20px; font-size: 12px; display: flex;
            align-items: center; gap: 8px; z-index: 1000; box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transform: translateX(-100px); transition: transform 0.3s ease;
        }
        .sync-indicator.show { transform: translateX(0); }
        .sync-indicator.syncing { background: #f59e0b; }
        .sync-indicator.error { background: #ef4444; }
        
        /* Performance optimizations */
        .lazy-image {
            opacity: 0;
            transition: opacity 0.3s;
        }
        .lazy-image.loaded {
            opacity: 1;
        }
        
        /* Focus styles for accessibility */
        button:focus-visible, 
        input:focus-visible, 
        a:focus-visible {
            outline: 2px solid #dc2626;
            outline-offset: 2px;
        }
        
        /* Print styles */
        @media print {
            .no-print { display: none !important; }
            body { font-size: 12pt; }
            .bg-red-600 { background: white !important; color: black !important; }
        }
        
        /* Order Success Modal */
        .order-success-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        
        .order-success-modal.active {
            opacity: 1;
            pointer-events: all;
        }
        
        .order-success-content {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            text-align: center;
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }
        
        .order-success-modal.active .order-success-content {
            transform: translateY(0);
        }
        
        .order-id-display {
            font-size: 1.5rem;
            font-weight: bold;
            color: #dc2626;
            margin: 1rem 0;
            padding: 0.5rem;
            background: #fef2f2;
            border-radius: 8px;
        }
        
        .whatsapp-check {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin: 1rem 0;
            padding: 1rem;
            background: #f0fdf4;
            border-radius: 8px;
            border: 1px solid #bbf7d0;
        }
        
        .whatsapp-check.success {
            background: #f0fdf4;
            border-color: #bbf7d0;
        }
        
        .whatsapp-check.error {
            background: #fef2f2;
            border-color: #fecaca;
        }
        
        /* Improved Hamburger Menu */
        .hamburger {
            display: flex;
            flex-direction: column;
            width: 30px;
            height: 21px;
            cursor: pointer;
            position: relative;
            background: none;
            border: none;
            padding: 0;
            z-index: 100;
        }
        
        .hamburger span {
            display: block;
            height: 3px;
            width: 100%;
            background: white;
            border-radius: 3px;
            opacity: 1;
            transform: rotate(0deg);
            transition: all 0.3s ease-in-out;
            position: absolute;
        }
        
        .hamburger span:nth-child(1) {
            top: 0;
        }
        
        .hamburger span:nth-child(2) {
            top: 9px;
        }
        
        .hamburger span:nth-child(3) {
            top: 18px;
        }
        
        .hamburger.active span:nth-child(1) {
            top: 9px;
            transform: rotate(135deg);
        }
        
        .hamburger.active span:nth-child(2) {
            opacity: 0;
            transform: translateX(-20px);
        }
        
        .hamburger.active span:nth-child(3) {
            top: 9px;
            transform: rotate(-135deg);
        }
        
        /* Better mobile menu */
        .mobile-menu {
            position: fixed;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            background: rgba(220, 38, 38, 0.98);
            z-index: 40;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transform: translateX(100%);
            transition: transform 0.4s cubic-bezier(0.23, 1, 0.32, 1);
            backdrop-filter: blur(5px);
        }
        
        .mobile-menu.active {
            transform: translateX(0);
        }
        
        .mobile-menu a {
            color: white;
            font-size: 1.5rem;
            font-weight: 600;
            margin: 1rem 0;
            padding: 0.5rem 1rem;
            text-decoration: none;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .mobile-menu a:hover {
            color: #fbbf24;
            transform: translateX(10px);
        }
        
        .mobile-menu a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            left: 0;
            background-color: #fbbf24;
            transition: width 0.3s ease;
        }
        
        .mobile-menu a:hover::after {
            width: 100%;
        }
        
        /* FIXED NAVBAR - COMPLETELY REWRITTEN */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            z-index: 50;
            background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            min-height: 64px;
            display: flex;
            align-items: center;
            padding: 0;
            overflow: hidden !important;
        }
        
        .navbar.scrolled {
            background: rgba(220, 38, 38, 0.95);
            backdrop-filter: blur(10px);
        }
        
        /* Navbar content wrapper to prevent overflow */
        .navbar-content {
            width: 100%;
            max-width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 1rem;
            margin: 0 auto;
            overflow: hidden;
        }
        
        /* Ensure proper spacing for fixed navbar */
        main section:first-of-type {
            padding-top: 5rem;
        }

        /* Enhanced animations for menu items */
        .menu-item-card {
            transform-style: preserve-3d;
            perspective: 1000px;
        }

        .menu-item-card:hover .menu-item-image {
            transform: scale(1.05);
        }

        .menu-item-image {
            transition: transform 0.5s ease;
        }

        /* Floating animation for hero elements */
        .floating-element {
            animation: floating 6s ease-in-out infinite;
        }

        @keyframes floating {
            0% { transform: translate(0, 0px); }
            50% { transform: translate(0, -15px); }
            100% { transform: translate(0, 0px); }
        }

        /* Text reveal animation */
        .text-reveal {
            overflow: hidden;
            position: relative;
        }

        .text-reveal::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            background: #dc2626;
            animation: text-reveal 1.5s cubic-bezier(0.77, 0, 0.175, 1) forwards;
        }

        @keyframes text-reveal {
            0% { transform: translateX(0); }
            100% { transform: translateX(101%); }
        }

        /* Special animation for discount badge */
        .discount-badge {
            animation: bounce 2s infinite, rotate 4s linear infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Pulsing animation for CTA buttons */
        .cta-pulse {
            animation: cta-pulse 2s infinite;
        }

        @keyframes cta-pulse {
            0% { box-shadow: 0 0 0 0 rgba(220, 38, 38, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(220, 38, 38, 0); }
            100% { box-shadow: 0 0 0 0 rgba(220, 38, 38, 0); }
        }

        /* Fix for cart modal scrolling */
        body.modal-open {
            overflow: hidden;
        }

        /* Fix for image loading */
        img.lazy-image {
            background-color: #f3f4f6;
        }
        
        /* FIXED: Mobile navbar styles */
        @media (max-width: 767px) {
            .navbar {
                padding: 0;
                width: 100vw;
                left: 0;
                right: 0;
            }
            
            .navbar-content {
                padding: 0 1rem;
                width: 100%;
                max-width: 100vw;
            }
            
            .navbar .text-2xl {
                font-size: 1.25rem;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                max-width: 150px;
            }
            
            /* Mobile menu button container */
            .mobile-menu-container {
                display: flex !important;
                align-items: center;
                gap: 1rem;
                flex-shrink: 0;
            }
            
            /* Ensure mobile menu button and cart icon don't overflow */
            .hamburger {
                flex-shrink: 0;
                margin: 0;
            }
            
            #cartIconMobile {
                flex-shrink: 0;
                margin: 0;
            }
            
            /* Hide desktop menu completely on mobile */
            .desktop-menu {
                display: none !important;
            }
        }
        
        /* Desktop navbar */
        @media (min-width: 768px) {
            .navbar-content {
                padding: 0 1.5rem;
            }
            
            /* Hide mobile menu button on desktop */
            .mobile-menu-container {
                display: none !important;
            }
            
            /* Show desktop menu */
            .desktop-menu {
                display: flex !important;
            }
        }
        
        /* Ensure no horizontal scroll on body */
        body {
            overflow-x: hidden;
            width: 100%;
            position: relative;
        }
        
        /* Container fix */
        .container {
            width: 100%;
            max-width: 100%;
            padding-left: 1rem;
            padding-right: 1rem;
            margin-left: auto;
            margin-right: auto;
        }
        
        @media (min-width: 640px) {
            .container {
                max-width: 640px;
            }
        }
        
        @media (min-width: 768px) {
            .container {
                max-width: 768px;
            }
        }
        
        @media (min-width: 1024px) {
            .container {
                max-width: 1024px;
            }
        }
        
        @media (min-width: 1280px) {
            .container {
                max-width: 1280px;
            }
        }
    </style>
</head>
<body class="font-sans bg-white text-gray-800">
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-red-600 text-white p-2 z-50">Skip to main content</a>

    <!-- Sync Indicator -->
    <div id="syncIndicator" class="sync-indicator no-print">
        <i class="fas fa-sync-alt"></i>
        <span id="syncMessage">Syncing...</span>
    </div>

    <!-- Navigation - COMPLETELY FIXED -->
    <nav class="navbar text-white no-print" role="navigation" aria-label="Main navigation">
        <div class="navbar-content">
            <div class="text-2xl font-bold flex items-center" data-aos="fade-right" data-aos-duration="800">
                <i class="fas fa-utensils mr-2" aria-hidden="true"></i> 
                <span class="brand-name">Mansara Taj</span>
            </div>
            
            <!-- Desktop Menu -->
            <ul class="desktop-menu space-x-8 font-semibold">
                <li><a href="#home" class="nav-link hover:text-yellow-300 transition" data-aos="fade-down" data-aos-delay="100">Home</a></li>
                <li><a href="#offers" class="nav-link hover:text-yellow-300 transition" data-aos="fade-down" data-aos-delay="200">Special Offers</a></li>
                <li><a href="#menu" class="nav-link hover:text-yellow-300 transition" data-aos="fade-down" data-aos-delay="300">Menu</a></li>
                <li><a href="#order-tracking" class="nav-link hover:text-yellow-300 transition" data-aos="fade-down" data-aos-delay="400">Order Tracking</a></li>
                <li><a href="#about" class="nav-link hover:text-yellow-300 transition" data-aos="fade-down" data-aos-delay="500">Our Story</a></li>
                <li><a href="#contact" class="nav-link hover:text-yellow-300 transition" data-aos="fade-down" data-aos-delay="600">Contact</a></li>
                <li>
                    <button id="cartIcon" class="nav-link relative hover:text-yellow-300 transition" aria-label="Shopping cart" data-aos="fade-down" data-aos-delay="700">
                        <i class="fas fa-shopping-cart" aria-hidden="true"></i>
                        <span id="cartCount" class="absolute -top-2 -right-2 bg-yellow-400 text-red-700 text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold">0</span>
                    </button>
                </li>
            </ul>
            
            <!-- Mobile Menu Button with Cart Icon -->
            <div class="mobile-menu-container">
                <button id="cartIconMobile" class="text-white text-xl relative" aria-label="Shopping cart">
                    <i class="fas fa-shopping-cart" aria-hidden="true"></i>
                    <span id="cartCountMobile" class="absolute -top-2 -right-2 bg-yellow-400 text-red-700 text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold">0</span>
                </button>
                <button id="mobileMenuBtn" class="hamburger" aria-label="Open menu" aria-expanded="false">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
    </nav>

    <!-- Mobile Menu -->
    <div id="mobileMenu" class="mobile-menu no-print" role="dialog" aria-modal="true" aria-label="Mobile menu">
        <button id="closeMenu" class="absolute top-6 right-6 text-2xl text-white hover:text-yellow-300 transition" aria-label="Close menu">
            <i class="fas fa-times" aria-hidden="true"></i>
        </button>
        <a href="#home" class="nav-link">Home</a>
        <a href="#offers" class="nav-link">Special Offers</a>
        <a href="#menu" class="nav-link">Menu</a>
        <a href="#order-tracking" class="nav-link">Order Tracking</a>
        <a href="#about" class="nav-link">Our Story</a>
        <a href="#contact" class="nav-link">Contact</a>
    </div>

    <!-- Order Success Modal -->
    <div id="orderSuccessModal" class="order-success-modal no-print">
        <div class="order-success-content">
            <div class="text-green-500 text-5xl mb-4">
                <i class="fas fa-check-circle"></i>
            </div>
            <h2 class="text-2xl font-bold text-gray-800 mb-2">Order Placed Successfully!</h2>
            <p class="text-gray-600 mb-4">Your order has been received and will be prepared shortly.</p>
            
            <div class="order-id-display">
                Order ID: <span id="successOrderId">MT123456</span>
            </div>
            
            <div id="whatsappCheck" class="whatsapp-check success">
                <i class="fas fa-check-circle text-green-500"></i>
                <span id="whatsappMessage">WhatsApp message sent successfully! Your order is confirmed.</span>
            </div>

            <!-- Tracking Information -->
            <div class="tracking-info bg-blue-50 p-4 rounded-lg border border-blue-200 mt-4">
                <h3 class="font-bold text-lg text-blue-800 mb-2">Track Your Order</h3>
                <p class="text-blue-700 mb-3">Use your Order ID to track your order status anytime:</p>
                <div class="flex gap-2">
                    <input type="text" id="trackOrderInput" class="flex-1 px-3 py-2 border border-gray-300 rounded text-center font-mono font-bold" readonly>
                    <button onclick="copyOrderId()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded transition">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
                <p class="text-sm text-blue-600 mt-2">Order ID copied! You can now track your order.</p>
            </div>
            
            <div class="mt-6 flex flex-col gap-3">
                <button id="trackOrderBtn" class="bg-red-500 hover:bg-red-600 text-white py-3 px-6 rounded-lg font-semibold transition flex items-center justify-center gap-2">
                    <i class="fas fa-search"></i> Track My Order Now
                </button>
                <button id="closeSuccessModal" class="bg-gray-500 hover:bg-gray-600 text-white py-3 px-6 rounded-lg font-semibold transition">
                    Close
                </button>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main id="main-content">
        <!-- Hero Section -->
        <section id="home" class="pt-24 h-screen flex justify-center items-center pb-16 md:pt-32 md:pb-24 bg-gradient-to-b from-red-700 to-red-500 text-white text-center relative overflow-hidden">
            <div class="absolute inset-0 opacity-10" aria-hidden="true">
                <div class="absolute top-10 left-10 w-20 h-20 bg-yellow-400 rounded-full floating-element"></div>
                <div class="absolute top-40 right-20 w-16 h-16 bg-yellow-400 rounded-full floating-element" style="animation-delay: 0.5s;"></div>
                <div class="absolute bottom-20 left-1/4 w-12 h-12 bg-yellow-400 rounded-full floating-element" style="animation-delay: 1s;"></div>
                <div class="absolute bottom-40 right-1/4 w-14 h-14 bg-yellow-400 rounded-full floating-element" style="animation-delay: 1.5s;"></div>
            </div>
            
            <div class="container mx-auto px-4 relative z-10">
                <h1 class="text-4xl md:text-6xl font-bold mb-4 text-reveal" data-aos="fade-up" data-aos-duration="1000">Authentic Chicken Biryani</h1>
                <p class="text-xl md:text-2xl mb-8 max-w-2xl mx-auto" data-aos="fade-up" data-aos-duration="1000" data-aos-delay="200">Flavorful, fresh, and made with love in Pokhara</p>
                <div class="flex flex-col md:flex-row gap-4 justify-center" data-aos="fade-up" data-aos-duration="1000" data-aos-delay="400">
                    <a href="#menu" class="bg-yellow-400 hover:bg-yellow-500 text-black font-bold py-3 px-8 rounded-full shadow-lg transition-all hover:scale-105 hover:shadow-xl cta-pulse">
                        Order Now <i class="fas fa-arrow-right ml-2" aria-hidden="true"></i>
                    </a>
                    <a href="#offers" class="bg-transparent border-2 border-white hover:bg-white hover:text-red-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transition-all">
                        Special Offers <i class="fas fa-tag ml-2" aria-hidden="true"></i>
                    </a>
                </div>
            </div>
        </section>

        <!-- Special Offers Section -->
        <section id="offers" class="py-16 bg-gradient-to-br from-red-50 to-yellow-50">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl md:text-4xl font-bold text-center text-red-700 mb-4" data-aos="fade-up">Special Offers</h2>
                <p class="text-center text-gray-600 mb-12 max-w-2xl mx-auto" data-aos="fade-up" data-aos-delay="100">Don't miss our exclusive deals!</p>
                
                <div class="max-w-4xl mx-auto" data-aos="zoom-in" data-aos-duration="800">
                    <div class="bg-white rounded-2xl shadow-2xl overflow-hidden border-4 border-yellow-400 discount-shine">
                        <div class="bg-gradient-to-r from-red-600 to-yellow-500 text-white p-8 text-center relative">
                            <div class="discount-badge absolute -top-4 -right-4 bg-red-600 text-white px-6 py-3 rounded-full font-bold text-lg shadow-lg">
                                LIMITED SALE!
                            </div>
                            <h3 class="text-3xl md:text-4xl font-bold mb-3" data-aos="fade-up" data-aos-delay="300">11% OFF</h3>
                            <p class="text-yellow-100 text-xl" data-aos="fade-up" data-aos-delay="400">On All Menu Items - No Minimum Order!</p>
                        </div>
                        <div class="p-8">
                            <div class="text-center mb-6">
                                <div class="flex justify-center items-baseline gap-4 mb-4" data-aos="fade-up" data-aos-delay="500">
                                    <span class="text-4xl font-bold text-red-600">11% OFF</span>
                                    <span class="text-2xl text-gray-400 line-through">Regular Price</span>
                                </div>
                                <p class="text-lg text-gray-700 mb-4" data-aos="fade-up" data-aos-delay="600">Automatically applied to all items in your order</p>
                                <div class="bg-green-50 border border-green-200 rounded-lg p-4 inline-block" data-aos="fade-up" data-aos-delay="700">
                                    <p class="text-green-800 font-semibold">
                                        <i class="fas fa-bolt mr-2" aria-hidden="true"></i>
                                        Example: Classic Biryani NPR 350 â†’ Pay Only NPR 312
                                    </p>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                                <div class="text-center p-4 bg-red-50 rounded-lg" data-aos="fade-up" data-aos-delay="800">
                                    <div class="text-2xl font-bold text-red-600">ðŸŽ¯</div>
                                    <p class="font-semibold">Applicable To</p>
                                    <p class="text-gray-600">All Menu Items</p>
                                </div>
                                <div class="text-center p-4 bg-yellow-50 rounded-lg" data-aos="fade-up" data-aos-delay="900">
                                    <div class="text-2xl font-bold text-yellow-600">ðŸ’°</div>
                                    <p class="font-semibold">Discount</p>
                                    <p class="text-gray-600">11% OFF</p>
                                </div>
                                <div class="text-center p-4 bg-green-50 rounded-lg" data-aos="fade-up" data-aos-delay="1000">
                                    <div class="text-2xl font-bold text-green-600">ðŸšš</div>
                                    <p class="font-semibold">Free Delivery</p>
                                    <p class="text-gray-600">Pokhara Valley</p>
                                </div>
                            </div>

                            <div class="text-center">
                                <p class="text-gray-600 mb-4" data-aos="fade-up" data-aos-delay="1100">Add items to cart and discount will be automatically applied</p>
                                <a href="#menu" class="bg-red-600 hover:bg-red-700 text-white py-4 px-12 rounded-full font-bold text-lg transition-all hover:scale-105 hover:shadow-xl inline-flex items-center gap-3" data-aos="fade-up" data-aos-delay="1200">
                                    <i class="fas fa-shopping-cart" aria-hidden="true"></i>
                                    Start Ordering Now
                                    <i class="fas fa-arrow-right" aria-hidden="true"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Menu Section -->
        <section id="menu" class="py-16 bg-white">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl md:text-4xl font-bold text-center text-red-700 mb-4" data-aos="fade-up">Our Menu</h2>
                <p class="text-center text-gray-600 mb-10 max-w-2xl mx-auto" data-aos="fade-up" data-aos-delay="100">Delicious food made with authentic recipes</p>
                
                <!-- Search and Filter -->
                <div class="mb-10" data-aos="fade-up" data-aos-delay="200">
                    <div class="max-w-md mx-auto mb-6 relative">
                        <input type="text" id="searchInput" class="w-full px-4 py-3 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent shadow-sm" placeholder="Search for dishes...">
                        <i class="fas fa-search absolute right-4 top-3 text-gray-400" aria-hidden="true"></i>
                    </div>
                    
                    <div class="flex flex-wrap justify-center gap-2 mb-6">
                        <button class="filter-btn px-4 py-2 rounded-full border border-gray-300 bg-red-600 text-white transition" data-filter="all">All Items</button>
                        <button class="filter-btn px-4 py-2 rounded-full border border-gray-300 hover:bg-red-600 hover:text-white transition" data-filter="biryani">Biryani</button>
                        <button class="filter-btn px-4 py-2 rounded-full border border-gray-300 hover:bg-red-600 hover:text-white transition" data-filter="rice">Rice Dishes</button>
                        <button class="filter-btn px-4 py-2 rounded-full border border-gray-300 hover:bg-red-600 hover:text-white transition" data-filter="sides">Side Dishes</button>
                        <button class="filter-btn px-4 py-2 rounded-full border border-gray-300 hover:bg-red-600 hover:text-white transition" data-filter="desserts">Desserts</button>
                        <button class="filter-btn px-4 py-2 rounded-full border border-gray-300 hover:bg-red-600 hover:text-white transition" data-filter="beverages">Beverages</button>
                    </div>
                </div>
                
                <!-- Menu Items -->
                <div id="menuContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-6xl mx-auto">
                    <!-- Menu items will be dynamically loaded here -->
                </div>
                
                <!-- View Cart Button -->
                <div class="text-center mt-12" data-aos="fade-up" data-aos-delay="300">
                    <button id="viewCartBtn" class="bg-red-600 hover:bg-red-700 text-white font-bold py-4 px-12 rounded-full shadow-lg transition-all hover:scale-105 hover:shadow-xl cta-pulse">
                        View Cart & Checkout <i class="fas fa-arrow-right ml-2" aria-hidden="true"></i>
                    </button>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="py-16 bg-gradient-to-br from-red-50 to-amber-50">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl md:text-4xl font-bold text-center text-red-700 mb-4" data-aos="fade-up">Our Story</h2>
                <p class="text-center text-gray-600 mb-10 max-w-2xl mx-auto" data-aos="fade-up" data-aos-delay="100">Serving authentic flavors since 2015</p>
                
                <div class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                    <div data-aos="fade-right" data-aos-duration="800">
                        <h3 class="text-2xl font-bold mb-4">The Mansara Taj Journey</h3>
                        <p class="text-gray-700 mb-4">Founded in 2015, Mansara Taj has been dedicated to bringing the authentic taste of traditional Chicken Biryani to Pokhara. Our recipes have been passed down through generations, ensuring every bite is filled with rich flavors and aromatic spices.</p>
                        <p class="text-gray-700 mb-4">We source our ingredients locally and prepare each dish with care, maintaining the highest standards of quality and hygiene. Our mission is to provide an unforgettable dining experience that keeps our customers coming back.</p>
                        
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-4 mt-6">
                            <div class="text-center p-4 bg-white rounded-lg shadow-sm border border-red-100" data-aos="zoom-in" data-aos-delay="200">
                                <div class="text-2xl font-bold text-red-600">8+</div>
                                <p class="font-semibold text-sm">Years Serving</p>
                            </div>
                            <div class="text-center p-4 bg-white rounded-lg shadow-sm border border-yellow-100" data-aos="zoom-in" data-aos-delay="300">
                                <div class="text-2xl font-bold text-yellow-600">5000+</div>
                                <p class="font-semibold text-sm">Happy Customers</p>
                            </div>
                            <div class="text-center p-4 bg-white rounded-lg shadow-sm border border-green-100" data-aos="zoom-in" data-aos-delay="400">
                                <div class="text-2xl font-bold text-green-600">100%</div>
                                <p class="font-semibold text-sm">Fresh Ingredients</p>
                            </div>
                        </div>
                        
                        <div class="mt-8">
                            <h4 class="text-xl font-bold mb-3 text-red-700" data-aos="fade-up" data-aos-delay="500">Our Promise</h4>
                            <ul class="space-y-2 text-gray-700">
                                <li class="flex items-start" data-aos="fade-up" data-aos-delay="600">
                                    <i class="fas fa-check text-green-500 mt-1 mr-2"></i>
                                    <span>Authentic family recipes passed down for generations</span>
                                </li>
                                <li class="flex items-start" data-aos="fade-up" data-aos-delay="700">
                                    <i class="fas fa-check text-green-500 mt-1 mr-2"></i>
                                    <span>Fresh, locally sourced ingredients daily</span>
                                </li>
                                <li class="flex items-start" data-aos="fade-up" data-aos-delay="800">
                                    <i class="fas fa-check text-green-500 mt-1 mr-2"></i>
                                    <span>Traditional cooking methods for authentic flavor</span>
                                </li>
                                <li class="flex items-start" data-aos="fade-up" data-aos-delay="900">
                                    <i class="fas fa-check text-green-500 mt-1 mr-2"></i>
                                    <span>Hygienic kitchen and food preparation standards</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                    
                    <div data-aos="fade-left" data-aos-duration="800" data-aos-delay="200">
                        <div class="relative">
                            <img 
                                src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='600' height='400' viewBox='0 0 600 400'%3E%3Crect width='600' height='400' fill='%23f3f4f6'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='Arial' font-size='18' fill='%236b7280'%3ERestaurant Image%3C/text%3E%3C/svg%3E" 
                                data-src="https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?auto=format&fit=crop&w=600&q=80" 
                                alt="Mansara Taj restaurant interior" 
                                class="w-full h-64 md:h-96 object-cover rounded-2xl shadow-lg lazy-image menu-item-image"
                            >
                            <div class="absolute -bottom-4 -left-4 bg-yellow-400 text-red-700 p-4 rounded-lg shadow-lg" data-aos="zoom-in" data-aos-delay="400">
                                <p class="font-bold text-lg">Since 2015</p>
                                <p class="text-sm">Serving Pokhara</p>
                            </div>
                        </div>
                        
                        <div class="mt-8 bg-white p-6 rounded-xl shadow-sm border border-red-100" data-aos="fade-up" data-aos-delay="600">
                            <h4 class="text-xl font-bold mb-3 text-red-700">Visit Us</h4>
                            <p class="text-gray-700 mb-2">
                                <i class="fas fa-map-marker-alt text-red-500 mr-2"></i>
                                Jalparoad, Srijana chowk, Pokhara 33700, Nepal
                            </p>
                            <p class="text-gray-700">
                                <i class="fas fa-clock text-red-500 mr-2"></i>
                                Open Daily: 10:00 AM - 10:00 PM
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="py-16 bg-white">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl md:text-4xl font-bold text-center text-red-700 mb-4" data-aos="fade-up">Contact Us</h2>
                
                <div class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-12">
                    <div data-aos="fade-right" data-aos-duration="800">
                        <h3 class="text-2xl font-bold mb-6">Get In Touch</h3>
                        <div class="space-y-6">
                            <div class="flex items-start" data-aos="fade-up" data-aos-delay="100">
                                <i class="fas fa-map-marker-alt text-red-600 mt-1 mr-4 text-xl" aria-hidden="true"></i>
                                <div>
                                    <h4 class="font-semibold text-lg">Address</h4>
                                    <p class="text-gray-600">Jalparoad, Srijana chowk, Pokhara 33700, Nepal</p>
                                </div>
                            </div>
                            <div class="flex items-start" data-aos="fade-up" data-aos-delay="200">
                                <i class="fas fa-phone text-red-600 mt-1 mr-4 text-xl" aria-hidden="true"></i>
                                <div>
                                    <h4 class="font-semibold text-lg">Phone</h4>
                                    <p class="text-gray-600">+977 9815845376</p>
                                </div>
                            </div>
                            <div class="flex items-start" data-aos="fade-up" data-aos-delay="300">
                                <i class="fas fa-clock text-red-600 mt-1 mr-4 text-xl" aria-hidden="true"></i>
                                <div>
                                    <h4 class="font-semibold text-lg">Opening Hours</h4>
                                    <p class="text-gray-600">Open Daily: 10:00 AM - 10:00 PM</p>
                                </div>
                            </div>
                        </div>

                        <!-- Google Maps -->
                        <div class="mt-8 rounded-xl overflow-hidden shadow-lg" data-aos="zoom-in" data-aos-delay="400">
                            <iframe
  title="Map - 28.209600,83.985600 (zoom 16)"
  src="https://www.google.com/maps?q=28.209600,83.985600&z=16&output=embed"
  width="100%" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
</iframe>
                        </div>

                        <!-- Quick Actions -->
                        <div id="order-tracking" class="mt-8 space-y-4">
                            <a href="https://wa.me/9779815845376" target="_blank" rel="noopener" class="flex items-center gap-4 bg-green-500 hover:bg-green-600 text-white px-6 py-4 rounded-xl transition-all hover:scale-105" data-aos="fade-up" data-aos-delay="500">
                                <i class="fab fa-whatsapp text-2xl" aria-hidden="true"></i>
                                <div>
                                    <p class="font-semibold text-lg">Chat on WhatsApp</p>
                                    <p class="text-green-100">Quick responses</p>
                                </div>
                            </a>
                            <a href="tel:+9779815845376" class="flex items-center gap-4 bg-blue-500 hover:bg-blue-600 text-white px-6 py-4 rounded-xl transition-all hover:scale-105" data-aos="fade-up" data-aos-delay="600">
                                <i class="fas fa-phone text-2xl" aria-hidden="true"></i>
                                <div>
                                    <p class="font-semibold text-lg">Call Us</p>
                                    <p class="text-blue-100">Immediate assistance</p>
                                </div>
                            </a>
                        </div>
                    </div>
                    
                    <!-- Order Status Check -->
                    <div data-aos="fade-left" data-aos-duration="800" data-aos-delay="200">
                        <h3 class="text-2xl font-bold mb-6">Check Your Order Status</h3>
                        <div class="space-y-4">
                            <div data-aos="fade-up" data-aos-delay="300">
                                <label for="orderIdInput" class="block text-sm font-medium text-gray-700 mb-1">Order ID</label>
                                <input type="text" id="orderIdInput" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent" placeholder="Enter your order ID (e.g., MT123456)">
                            </div>
                            <button id="checkOrderBtn" class="bg-red-600 hover:bg-red-700 text-white py-3 px-8 rounded-lg font-semibold transition-all hover:scale-105 w-full" data-aos="fade-up" data-aos-delay="400">
                                Check Order Status <i class="fas fa-search ml-2" aria-hidden="true"></i>
                            </button>
                            
                            <!-- Order Status Display -->
                            <div id="orderStatus" class="order-status mt-6 p-4 bg-gray-50 rounded-lg border" data-aos="fade-up" data-aos-delay="500">
                                <h4 class="font-bold text-lg mb-2">Order Status</h4>
                                <div id="orderDetails" class="text-gray-700">
                                    <!-- Order details will be displayed here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-red-800 text-white py-12">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div data-aos="fade-up" data-aos-delay="100">
                    <h3 class="text-xl font-bold mb-4">Mansara Taj</h3>
                    <p class="text-red-200">Serving authentic chicken biryani in Pokhara since 2015.</p>
                </div>
                <div data-aos="fade-up" data-aos-delay="200">
                    <h3 class="text-xl font-bold mb-4">Quick Links</h3>
                    <ul class="space-y-2 text-red-200">
                        <li><a href="#home" class="hover:text-yellow-300 transition">Home</a></li>
                        <li><a href="#offers" class="hover:text-yellow-300 transition">Special Offers</a></li>
                        <li><a href="#menu" class="hover:text-yellow-300 transition">Menu</a></li>
                        <li><a href="#about" class="hover:text-yellow-300 transition">Our Story</a></li>
                        <li><a href="#contact" class="hover:text-yellow-300 transition">Contact</a></li>
                    </ul>
                </div>
                <div data-aos="fade-up" data-aos-delay="300">
                    <h3 class="text-xl font-bold mb-4">Follow Us</h3>
                    <div class="flex space-x-4">
                        <a href="https://www.instagram.com/_bymansara/" target="_blank" rel="noopener" class="text-white hover:text-yellow-300 transition text-xl bg-red-700 hover:bg-red-600 w-10 h-10 rounded-full flex items-center justify-center" aria-label="Instagram">
                            <i class="fab fa-instagram" aria-hidden="true"></i>
                        </a>
                        <a href="#" class="text-white hover:text-yellow-300 transition text-xl bg-red-700 hover:bg-red-600 w-10 h-10 rounded-full flex items-center justify-center" aria-label="Facebook">
                            <i class="fab fa-facebook-f" aria-hidden="true"></i>
                        </a>
                    </div>
                </div>
            </div>
            <div class="text-center mt-8 pt-8 border-t border-red-700 text-red-200" data-aos="fade-up" data-aos-delay="400">
                <p>&copy; 2024 Mansara Taj Chicken Biryani. All rights reserved. Design & Developed By Saheb Ansari</p>
            </div>
        </div>
    </footer>

    <!-- WhatsApp Button -->
    <div class="whatsapp-btn fixed bottom-6 right-6 w-16 h-16 bg-green-500 rounded-full flex items-center justify-center shadow-2xl cursor-pointer z-50 no-print" onclick="window.open('https://wa.me/9779815845376', '_blank')" role="button" aria-label="Contact us on WhatsApp">
        <i class="fab fa-whatsapp text-white text-2xl" aria-hidden="true"></i>
    </div>

    <!-- Cart Modal -->
    <div id="cartModal" class="cart-modal overflow-y-auto fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 no-print" role="dialog" aria-modal="true" aria-labelledby="cartTitle">
        <div class="cart-content bg-white w-11/12 max-w-2xl rounded-2xl shadow-2xl max-h-[90vh] flex flex-col">
            <div class="flex justify-between items-center p-6 border-b">
                <h2 id="cartTitle" class="text-2xl font-bold">Your Order</h2>
                <button id="closeCart" class="text-gray-500 hover:text-gray-700 text-2xl transition" aria-label="Close cart">
                    <i class="fas fa-times" aria-hidden="true"></i>
                </button>
            </div>
            
            <div class="p-6 flex-grow overflow-y-auto">
                <div id="cartItems">
                    <!-- Cart items will be dynamically added here -->
                </div>
            </div>
            
            <div class="border-t p-6 bg-gray-50">
                <div class="space-y-2 mb-4">
                    <div class="flex justify-between">
                        <span>Subtotal:</span>
                        <span id="subtotal">NPR 0</span>
                    </div>
                    <div class="flex justify-between">
                        <span>Delivery Fee:</span>
                        <span id="delivery">NPR 0</span>
                    </div>
                    <div id="discountSection" class="flex justify-between text-green-600 font-semibold">
                        <span>11% Discount:</span>
                        <span id="discountAmount">-NPR 0</span>
                    </div>
                    <div class="flex justify-between text-lg font-bold">
                        <span>Total:</span>
                        <span id="total">NPR 0</span>
                    </div>
                    <div id="discountNote" class="text-sm text-green-600">
                        <i class="fas fa-check-circle mr-1" aria-hidden="true"></i> 11% discount applied on all items
                    </div>
                </div>
                
                <!-- Customer Information Form -->
                <div class="bg-white p-4 rounded-lg border mb-4">
                    <h3 class="font-bold mb-3 text-lg">Delivery Information</h3>
                    <div class="space-y-3">
                        <div>
                            <label for="customerName" class="block text-sm font-medium text-gray-700 mb-1">Full Name *</label>
                            <input type="text" id="customerName" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-red-500" placeholder="Your full name" required>
                        </div>
                        <div>
                            <label for="customerPhone" class="block text-sm font-medium text-gray-700 mb-1">Phone Number *</label>
                            <input type="tel" id="customerPhone" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-red-500" placeholder="Your phone number" required>
                        </div>
                        <div>
                            <label for="customerAddress" class="block text-sm font-medium text-gray-700 mb-1">Delivery Address *</label>
                            <textarea id="customerAddress" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-red-500" placeholder="Your complete delivery address" required></textarea>
                        </div>
                        <div>
                            <label for="customerNotes" class="block text-sm font-medium text-gray-700 mb-1">Special Instructions</label>
                            <textarea id="customerNotes" rows="2" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-red-500" placeholder="Any special requests or instructions"></textarea>
                        </div>
                    </div>
                </div>
                
                <button id="checkoutBtn" class="w-full bg-green-500 hover:bg-green-600 text-white py-4 rounded-lg font-bold transition flex items-center justify-center gap-2 text-lg">
                    <i class="fab fa-whatsapp" aria-hidden="true"></i> Order via WhatsApp
                </button>
            </div>
        </div>
    </div>

    <!-- Animation Libraries -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <script>
        // ==================== ANIMATION INITIALIZATION ====================
        
        // Initialize AOS (Animate On Scroll)
        AOS.init({
            duration: 800,
            once: true,
            offset: 100,
            easing: 'ease-out-cubic'
        });
        
        // Initialize GSAP animations
        gsap.registerPlugin(ScrollTrigger);
        
        // ==================== NAVBAR FIXES ====================
        
        // Improved mobile menu functionality
        function setupNavbar() {
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const mobileMenu = document.getElementById('mobileMenu');
            const closeMenu = document.getElementById('closeMenu');
            const mobileMenuLinks = document.querySelectorAll('#mobileMenu a');
            
            // Toggle mobile menu with hamburger animation
            mobileMenuBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                mobileMenu.classList.toggle('active');
                mobileMenuBtn.classList.toggle('active');
                mobileMenuBtn.setAttribute('aria-expanded', mobileMenu.classList.contains('active'));
                document.body.classList.toggle('modal-open', mobileMenu.classList.contains('active'));
            });
            
            // Close mobile menu with close button
            closeMenu.addEventListener('click', () => {
                mobileMenu.classList.remove('active');
                mobileMenuBtn.classList.remove('active');
                mobileMenuBtn.setAttribute('aria-expanded', 'false');
                document.body.classList.remove('modal-open');
            });
            
            // Close mobile menu when clicking on links
            mobileMenuLinks.forEach(link => {
                link.addEventListener('click', () => {
                    mobileMenu.classList.remove('active');
                    mobileMenuBtn.classList.remove('active');
                    mobileMenuBtn.setAttribute('aria-expanded', 'false');
                    document.body.classList.remove('modal-open');
                });
            });
            
            // Close mobile menu when clicking outside
            document.addEventListener('click', (e) => {
                if (mobileMenu.classList.contains('active') && 
                    !mobileMenu.contains(e.target) && 
                    e.target !== mobileMenuBtn) {
                    mobileMenu.classList.remove('active');
                    mobileMenuBtn.classList.remove('active');
                    mobileMenuBtn.setAttribute('aria-expanded', 'false');
                    document.body.classList.remove('modal-open');
                }
            });
            
            // Navbar scroll effect - FIXED INITIAL STATE
            function handleNavbarScroll() {
                const navbar = document.querySelector('.navbar');
                if (window.scrollY > 50) {
                    navbar.classList.add('scrolled');
                } else {
                    navbar.classList.remove('scrolled');
                }
            }
            
            // Initialize navbar state on page load
            handleNavbarScroll();
            
            // Add scroll event listener
            window.addEventListener('scroll', handleNavbarScroll);
            
            // Close mobile menu with Escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && mobileMenu.classList.contains('active')) {
                    mobileMenu.classList.remove('active');
                    mobileMenuBtn.classList.remove('active');
                    mobileMenuBtn.setAttribute('aria-expanded', 'false');
                    document.body.classList.remove('modal-open');
                }
            });
            
            // Force navbar width recalculation on load
            setTimeout(() => {
                const navbar = document.querySelector('.navbar');
                const navbarContent = document.querySelector('.navbar-content');
                
                // Reset and force proper width
                navbar.style.width = '100vw';
                navbarContent.style.width = '100%';
                navbarContent.style.maxWidth = '100%';
                
                // Prevent any overflow
                document.body.style.overflowX = 'hidden';
                document.documentElement.style.overflowX = 'hidden';
            }, 100);
        }
        
        // ==================== ORDER SUCCESS MODAL ====================
        
        let currentOrderId = null;
        
        function setupOrderSuccessModal() {
            const trackOrderBtn = document.getElementById('trackOrderBtn');
            const closeSuccessModal = document.getElementById('closeSuccessModal');
            const orderSuccessModal = document.getElementById('orderSuccessModal');
            
            // Track order button
            trackOrderBtn.addEventListener('click', () => {
                orderSuccessModal.classList.remove('active');
                document.getElementById('orderIdInput').value = currentOrderId;
                document.getElementById('orderIdInput').focus();
                document.getElementById('checkOrderBtn').click();
                
                // Scroll to contact section
                document.getElementById('contact').scrollIntoView({ behavior: 'smooth' });
            });
            
            // Close modal
            closeSuccessModal.addEventListener('click', () => {
                orderSuccessModal.classList.remove('active');
                document.body.classList.remove('modal-open');
            });
            
            // Close modal when clicking outside
            orderSuccessModal.addEventListener('click', (e) => {
                if (e.target === orderSuccessModal) {
                    orderSuccessModal.classList.remove('active');
                    document.body.classList.remove('modal-open');
                }
            });
            
            // Close modal with Escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && orderSuccessModal.classList.contains('active')) {
                    orderSuccessModal.classList.remove('active');
                    document.body.classList.remove('modal-open');
                }
            });
        }
        
        function showOrderSuccess(orderId) {
            currentOrderId = orderId;
            document.getElementById('successOrderId').textContent = orderId;
            document.getElementById('trackOrderInput').value = orderId;
            document.getElementById('orderSuccessModal').classList.add('active');
            document.body.classList.add('modal-open');
            
            // Auto-copy order ID to clipboard
            copyOrderId();
        }
        
        function copyOrderId() {
            const orderId = currentOrderId;
            navigator.clipboard.writeText(orderId).then(() => {
                console.log('Order ID copied to clipboard');
            }).catch(err => {
                console.error('Failed to copy order ID: ', err);
                // Fallback for older browsers
                const tempInput = document.createElement('input');
                tempInput.value = orderId;
                document.body.appendChild(tempInput);
                tempInput.select();
                document.execCommand('copy');
                document.body.removeChild(tempInput);
            });
        }
        
        // ==================== CORE APP CODE ====================
        const menuData = [
            { id: 1, name: "Classic Chicken Biryani", price: 350, category: "biryani", image: "https://images.unsplash.com/photo-1601050697523-ec92b7f1ecaa?auto=format&fit=crop&w=600&q=80", description: "Traditional biryani with aromatic spices and tender chicken", popular: true },
            { id: 2, name: "Spicy Chicken Biryani", price: 380, category: "biryani", image: "https://images.unsplash.com/photo-1589308078052-1c5406c3e1c2?auto=format&fit=crop&w=600&q=80", description: "Extra spicy version for those who love heat", popular: true },
            { id: 3, name: "Hyderabadi Chicken Biryani", price: 420, category: "biryani", image: "https://images.unsplash.com/photo-1563379091339-03246963d96f?auto=format&fit=crop&w=600&q=80", description: "Authentic Hyderabadi style with rich flavors", popular: true },
            { id: 4, name: "Vegetable Pulao", price: 250, category: "rice", image: "https://images.unsplash.com/photo-1589302168068-964664d93dc0?auto=format&fit=crop&w=600&q=80", description: "Fragrant rice with mixed vegetables", popular: false },
            { id: 5, name: "Chicken Pulao", price: 320, category: "rice", image: "https://images.unsplash.com/photo-1603133872878-684f208fb84b?auto=format&fit=crop&w=600&q=80", description: "Rice cooked with chicken and mild spices", popular: true },
            { id: 6, name: "Raita", price: 80, category: "sides", image: "https://images.unsplash.com/photo-1604323682670-c0cbc2c1498d?auto=format&fit=crop&w=600&q=80", description: "Yogurt with cucumber and spices", popular: true },
            { id: 7, name: "Fresh Salad", price: 70, category: "sides", image: "https://images.unsplash.com/photo-1546069901-ba9599a7e63c?auto=format&fit=crop&w=600&q=80", description: "Mixed vegetables with lemon dressing", popular: false },
            { id: 8, name: "Gulab Jamun", price: 120, category: "desserts", image: "https://images.unsplash.com/photo-1563729784474-d77dbb933a9e?auto=format&fit=crop&w=600&q=80", description: "Sweet milk dumplings in sugar syrup", popular: true },
            { id: 9, name: "Kheer", price: 100, category: "desserts", image: "https://images.unsplash.com/photo-1548365324-2d2527e5a620?auto=format&fit=crop&w=600&q=80", description: "Rice pudding with nuts and cardamom", popular: false },
            { id: 10, name: "Mango Lassi", price: 120, category: "beverages", image: "https://images.unsplash.com/photo-1629367494173-c78a56567877?auto=format&fit=crop&w=600&q=80", description: "Refreshing yogurt drink with mango", popular: true },
            { id: 11, name: "Masala Chai", price: 60, category: "beverages", image: "https://images.unsplash.com/photo-1571934811356-5cc061b6821f?auto=format&fit=crop&w=600&q=80", description: "Spiced Indian tea", popular: false }
        ];

        let cart = JSON.parse(localStorage.getItem('mansaraTajCart')) || [];
        let currentFilter = "all";
        let currentSearch = "";

        // ==================== APP INITIALIZATION ====================
        function initializeApp() {
            // Setup navbar first
            setupNavbar();
            setupOrderSuccessModal();
            
            // Initialize the rest of your app...
            const savedCart = localStorage.getItem('mansaraTajCart');
            if (savedCart) {
                cart = JSON.parse(savedCart);
                updateCartDisplay();
            }
            
            renderMenuItems();
            setupEventListeners();
            lazyLoadImages();
            
            // Initialize cloud sync
            syncWithCloud();
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', initializeApp);
        
        // Additional fix: Prevent any potential overflow on window resize
        window.addEventListener('resize', function() {
            const navbar = document.querySelector('.navbar');
            navbar.style.width = '100vw';
            document.body.style.overflowX = 'hidden';
        });

        // Helper functions
        function showNotification(message, type = 'success') {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${
                type === 'success' ? 'bg-green-500 text-white' : 'bg-red-500 text-white'
            }`;
            notification.innerHTML = `
                <div class="flex items-center">
                    <i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-triangle'} mr-2"></i>
                    <span>${message}</span>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Remove after 3 seconds
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 3000);
        }

        // Debounce function for performance
        function debounce(func, wait, immediate) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    timeout = null;
                    if (!immediate) func(...args);
                };
                const callNow = immediate && !timeout;
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
                if (callNow) func(...args);
            };
        }

        // Lazy load images
        function lazyLoadImages() {
            const lazyImages = document.querySelectorAll('.lazy-image');
            
            const imageObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        if (img.dataset.src) {
                            img.src = img.dataset.src;
                            img.classList.add('loaded');
                            imageObserver.unobserve(img);
                        }
                    }
                });
            });
            
            lazyImages.forEach(img => {
                if (img.dataset.src) {
                    imageObserver.observe(img);
                }
            });
        }

        // Core app functions
        function setupEventListeners() {
            // Cart
            const cartIcon = document.getElementById('cartIcon');
            const cartIconMobile = document.getElementById('cartIconMobile');
            const cartModal = document.getElementById('cartModal');
            const closeCart = document.getElementById('closeCart');
            const viewCartBtn = document.getElementById('viewCartBtn');

            cartIcon.addEventListener('click', openCart);
            cartIconMobile.addEventListener('click', openCart);
            viewCartBtn.addEventListener('click', openCart);
            closeCart.addEventListener('click', () => {
                cartModal.classList.remove('active');
                document.body.classList.remove('modal-open');
            });

            // Order check
            const checkOrderBtn = document.getElementById('checkOrderBtn');
            checkOrderBtn.addEventListener('click', checkOrderStatus);

            // Filters and search
            const filterButtons = document.querySelectorAll('.filter-btn');
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    filterButtons.forEach(btn => {
                        btn.classList.remove('bg-red-600', 'text-white');
                        btn.classList.add('hover:bg-red-600', 'hover:text-white');
                    });
                    this.classList.add('bg-red-600', 'text-white');
                    this.classList.remove('hover:bg-red-600', 'hover:text-white');
                    currentFilter = this.getAttribute('data-filter');
                    renderMenuItems();
                });
            });

            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('input', debounce(function() {
                currentSearch = this.value.toLowerCase();
                renderMenuItems();
            }, 300));

            // Checkout
            const checkoutBtn = document.getElementById('checkoutBtn');
            checkoutBtn.addEventListener('click', processCheckout);
            
            // Close modal on outside click
            document.addEventListener('click', (e) => {
                if (e.target.id === 'cartModal') {
                    cartModal.classList.remove('active');
                    document.body.classList.remove('modal-open');
                }
            });
        }

        function renderMenuItems() {
            const menuContainer = document.getElementById('menuContainer');
            menuContainer.innerHTML = '';
            
            let filteredItems = menuData.filter(item => {
                if (currentFilter !== 'all' && item.category !== currentFilter) return false;
                if (currentSearch && !item.name.toLowerCase().includes(currentSearch)) return false;
                return true;
            });
            
            if (filteredItems.length === 0) {
                menuContainer.innerHTML = `
                    <div class="col-span-3 text-center py-12">
                        <i class="fas fa-search text-5xl text-gray-300 mb-4"></i>
                        <h3 class="text-xl font-semibold text-gray-500">No items found</h3>
                        <p class="text-gray-400 mt-2">Try adjusting your search or filter criteria</p>
                    </div>
                `;
            } else {
                filteredItems.forEach((item, index) => {
                    const discountedPrice = Math.round(item.price * 0.89);
                    let badges = '';
                    if (item.popular) {
                        badges = '<div class="absolute top-4 left-4 bg-red-600 text-white px-3 py-1 rounded-full text-xs font-bold">Popular</div>';
                    }
                    badges += '<div class="absolute top-4 right-4 bg-green-600 text-white px-3 py-1 rounded-full text-xs font-bold">11% OFF</div>';
                    
                    const menuItem = document.createElement('div');
                    menuItem.className = 'menu-item-card bg-white rounded-2xl shadow-lg overflow-hidden';
                    menuItem.setAttribute('data-aos', 'fade-up');
                    menuItem.setAttribute('data-aos-delay', (index % 3) * 100);
                    menuItem.innerHTML = `
                        <div class="relative">
                            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='600' height='300' viewBox='0 0 600 300'%3E%3Crect width='600' height='300' fill='%23f3f4f6'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='Arial' font-size='18' fill='%236b7280'%3E${item.name}%3C/text%3E%3C/svg%3E" 
                                 data-src="${item.image}" 
                                 alt="${item.name}" 
                                 class="w-full h-48 object-cover lazy-image menu-item-image">
                            ${badges}
                        </div>
                        <div class="p-6">
                            <h3 class="text-xl font-semibold mb-2">${item.name}</h3>
                            <div class="flex items-center gap-2 mb-2">
                                <span class="original-price">NPR ${item.price}</span>
                                <span class="discounted-price text-lg">NPR ${discountedPrice}</span>
                            </div>
                            <p class="text-sm text-gray-500 mb-4">${item.description}</p>
                            <button onclick="addToCart(${item.id})" class="w-full bg-yellow-400 hover:bg-yellow-500 text-black py-3 px-4 rounded-xl font-semibold transition-all hover:scale-105">
                                Add to Cart <i class="fas fa-plus ml-1"></i>
                            </button>
                        </div>
                    `;
                    menuContainer.appendChild(menuItem);
                });
            }
            
            // Re-initialize lazy loading for new images
            lazyLoadImages();
        }

        // Cart functions
        function addToCart(itemId) {
            const item = menuData.find(menuItem => menuItem.id === itemId);
            const existingItem = cart.find(cartItem => cartItem.id === itemId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ id: item.id, name: item.name, price: item.price, quantity: 1 });
            }
            
            updateCartDisplay();
            showNotification(`${item.name} added to cart!`);
        }

        function updateCartDisplay() {
            const cartCount = document.getElementById('cartCount');
            const cartCountMobile = document.getElementById('cartCountMobile');
            const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
            
            cartCount.textContent = totalItems;
            cartCountMobile.textContent = totalItems;
            localStorage.setItem('mansaraTajCart', JSON.stringify(cart));
            
            if (document.getElementById('cartModal').classList.contains('active')) {
                renderCartItems();
            }
        }

        function renderCartItems() {
            const cartItems = document.getElementById('cartItems');
            cartItems.innerHTML = '';
            
            if (cart.length === 0) {
                cartItems.innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        <i class="fas fa-shopping-cart text-4xl mb-3 text-gray-300"></i>
                        <p class="text-lg">Your cart is empty</p>
                        <p class="text-sm mt-2">Add some delicious items to get started!</p>
                    </div>
                `;
            } else {
                cart.forEach((item, index) => {
                    const cartItem = document.createElement('div');
                    cartItem.className = 'flex justify-between items-center py-4 border-b';
                    cartItem.innerHTML = `
                        <div class="flex-1">
                            <h4 class="font-semibold">${item.name}</h4>
                            <div class="flex items-center gap-2">
                                <span class="text-gray-600 original-price">NPR ${item.price}</span>
                                <span class="text-green-600 font-semibold">â†’ NPR ${Math.round(item.price * 0.89)}</span>
                            </div>
                        </div>
                        <div class="flex items-center gap-3">
                            <button class="quantity-btn w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center hover:bg-red-600 hover:text-white transition" onclick="updateQuantity(${index}, ${item.quantity - 1})">-</button>
                            <span class="font-semibold">${item.quantity}</span>
                            <button class="quantity-btn w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center hover:bg-red-600 hover:text-white transition" onclick="updateQuantity(${index}, ${item.quantity + 1})">+</button>
                            <button class="text-red-500 hover:text-red-700" onclick="removeFromCart(${index})" aria-label="Remove item">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `;
                    cartItems.appendChild(cartItem);
                });
            }
            
            const subtotal = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
            const discount = Math.round(subtotal * 0.11);
            const total = subtotal - discount;
            
            document.getElementById('subtotal').textContent = `NPR ${subtotal}`;
            document.getElementById('discountAmount').textContent = `-NPR ${discount}`;
            document.getElementById('total').textContent = `NPR ${total}`;
        }

        function updateQuantity(index, newQuantity) {
            if (newQuantity <= 0) {
                removeFromCart(index);
            } else {
                cart[index].quantity = newQuantity;
                updateCartDisplay();
            }
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCartDisplay();
        }

        function openCart() {
            document.getElementById('cartModal').classList.add('active');
            document.body.classList.add('modal-open');
            renderCartItems();
        }

        // ==================== CHECKOUT FLOW ====================
        
        async function processCheckout() {
            if (cart.length === 0) {
                showNotification('Your cart is empty!', 'error');
                return;
            }
            
            const customerName = document.getElementById('customerName').value;
            const customerPhone = document.getElementById('customerPhone').value;
            const customerAddress = document.getElementById('customerAddress').value;
            
            if (!customerName || !customerPhone || !customerAddress) {
                showNotification('Please fill in all required fields', 'error');
                return;
            }
            
            // Validate phone number
            const phoneRegex = /^[0-9+\-\s()]{10,}$/;
            if (!phoneRegex.test(customerPhone)) {
                showNotification('Please enter a valid phone number', 'error');
                return;
            }
            
            const checkoutBtn = document.getElementById('checkoutBtn');
            const originalText = checkoutBtn.innerHTML;
            checkoutBtn.innerHTML = '<div class="loading-spinner"></div> Processing...';
            checkoutBtn.disabled = true;
            
            const orderId = 'MT' + Date.now().toString().slice(-6);
            const subtotal = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
            const discount = Math.round(subtotal * 0.11);
            const total = subtotal - discount;
            
            // Create order object
            const newOrder = {
                id: orderId,
                customerName: customerName,
                phone: customerPhone,
                address: customerAddress,
                items: cart.map(item => ({
                    name: item.name,
                    price: item.price,
                    quantity: item.quantity
                })),
                subtotal: subtotal,
                discount: discount,
                total: total,
                status: 'pending',
                timestamp: new Date().toISOString(),
                notes: document.getElementById('customerNotes').value || '',
                whatsappSent: true
            };
            
            // Save order locally
            const currentOrders = JSON.parse(localStorage.getItem('mansaraTajOrders')) || [];
            currentOrders.unshift(newOrder);
            localStorage.setItem('mansaraTajOrders', JSON.stringify(currentOrders));
            
            // Generate WhatsApp message
            let orderMessage = "Hello Mansara Taj, I want to place an order:\n\n";
            newOrder.items.forEach(item => {
                const itemTotal = item.price * item.quantity;
                const discountedItemTotal = Math.round(itemTotal * 0.89);
                orderMessage += `${item.name} x ${item.quantity} = NPR ${discountedItemTotal}\n`;
            });
            
            orderMessage += `\nSubtotal: NPR ${subtotal}`;
            orderMessage += `\n11% Discount: -NPR ${discount}`;
            orderMessage += `\nTotal: NPR ${total}`;
            orderMessage += `\n\nOrder ID: ${orderId}`;
            orderMessage += `\nCustomer Information:\n`;
            orderMessage += `Name: ${customerName}\n`;
            orderMessage += `Phone: ${customerPhone}\n`;
            orderMessage += `Address: ${customerAddress}\n`;
            
            if (document.getElementById('customerNotes').value) {
                orderMessage += `Special Instructions: ${document.getElementById('customerNotes').value}\n`;
            }
            
            orderMessage += "\nPlease confirm my order. Thank you!";
            
            // Open WhatsApp with order details
            const whatsappUrl = `https://wa.me/9779815845376?text=${encodeURIComponent(orderMessage)}`;
            window.open(whatsappUrl, '_blank');
            
            // Close cart modal
            document.getElementById('cartModal').classList.remove('active');
            document.body.classList.remove('modal-open');
            
            // Reset checkout button
            checkoutBtn.innerHTML = originalText;
            checkoutBtn.disabled = false;
            
            // Clear cart and form
            cart = [];
            updateCartDisplay();
            document.getElementById('customerName').value = '';
            document.getElementById('customerPhone').value = '';
            document.getElementById('customerAddress').value = '';
            document.getElementById('customerNotes').value = '';
            
            // Show order success modal after a short delay
            setTimeout(() => {
                showOrderSuccess(orderId);
            }, 1000);
        }

        // ==================== CLOUD SYNC FUNCTIONS ====================
        const JSONBIN_CONFIG = {
            BIN_ID: '68f0b56b43b1c97be96aee74',
            API_KEY: '$2a$10$PAVuboENhJZw2YHFfJhiuuNqatCmpYi4aDXdeBdcqk/2aX9ZEZc5m',
            BASE_URL: 'https://api.jsonbin.io/v3/b'
        };

        async function syncWithCloud() {
            showSyncIndicator('Syncing orders...', 'syncing');
            
            try {
                const localOrders = JSON.parse(localStorage.getItem('mansaraTajOrders')) || [];
                const cloudData = await getDataFromCloud();
                const cloudOrders = cloudData?.orders || [];
                
                const mergedOrders = mergeOrders(localOrders, cloudOrders);
                localStorage.setItem('mansaraTajOrders', JSON.stringify(mergedOrders));
                
                if (JSON.stringify(mergedOrders) !== JSON.stringify(cloudOrders)) {
                    await saveDataToCloud({
                        orders: mergedOrders,
                        restaurant: "Mansara Taj Pokhara",
                        lastSync: new Date().toISOString(),
                        totalOrders: mergedOrders.length
                    });
                    showSyncIndicator(`${mergedOrders.length} orders synced`, 'success');
                } else {
                    showSyncIndicator('Already up to date', 'success');
                }
                
                return mergedOrders;
                
            } catch (error) {
                console.error('Cloud sync failed:', error);
                showSyncIndicator('Sync failed', 'error');
                return JSON.parse(localStorage.getItem('mansaraTajOrders')) || [];
            }
        }

        async function getDataFromCloud() {
            try {
                const response = await fetch(`${JSONBIN_CONFIG.BASE_URL}/${JSONBIN_CONFIG.BIN_ID}/latest`, {
                    headers: {
                        'X-Master-Key': JSONBIN_CONFIG.API_KEY
                    }
                });
                
                if (!response.ok) throw new Error('Failed to fetch from cloud');
                
                const data = await response.json();
                return data.record;
            } catch (error) {
                console.warn('Could not fetch from cloud:', error);
                return null;
            }
        }

        async function saveDataToCloud(data) {
            try {
                const response = await fetch(`${JSONBIN_CONFIG.BASE_URL}/${JSONBIN_CONFIG.BIN_ID}`, {
                    method: 'PUT',
                    headers: {
                        'X-Master-Key': JSONBIN_CONFIG.API_KEY,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
                
                if (!response.ok) throw new Error('Failed to save to cloud');
                
                return await response.json();
            } catch (error) {
                console.error('Failed to save to cloud:', error);
                throw error;
            }
        }

        function mergeOrders(localOrders, cloudOrders) {
            const orderMap = new Map();
            
            cloudOrders.forEach(order => {
                if (order.id) orderMap.set(order.id, order);
            });
            
            localOrders.forEach(order => {
                if (order.id && !orderMap.has(order.id)) {
                    orderMap.set(order.id, order);
                }
            });
            
            return Array.from(orderMap.values()).sort((a, b) => 
                new Date(b.timestamp) - new Date(a.timestamp)
            );
        }

        function showSyncIndicator(message, type = 'syncing') {
            const indicator = document.getElementById('syncIndicator');
            const messageEl = document.getElementById('syncMessage');
            
            messageEl.textContent = message;
            indicator.className = 'sync-indicator show';
            
            if (type === 'success') {
                indicator.style.background = '#10b981';
            } else if (type === 'error') {
                indicator.style.background = '#ef4444';
            } else {
                indicator.style.background = '#f59e0b';
            }
            
            setTimeout(() => {
                indicator.classList.remove('show');
            }, 3000);
        }

        // ==================== ORDER TRACKING ====================
        async function checkOrderStatus() {
            const orderIdInput = document.getElementById('orderIdInput');
            const orderId = orderIdInput.value.trim();
            const orderStatus = document.getElementById('orderStatus');
            const orderDetails = document.getElementById('orderDetails');
            
            if (!orderId) {
                showNotification('Please enter your order ID', 'error');
                return;
            }
            
            const checkOrderBtn = document.getElementById('checkOrderBtn');
            const originalText = checkOrderBtn.innerHTML;
            checkOrderBtn.innerHTML = '<div class="loading-spinner"></div> Checking...';
            checkOrderBtn.disabled = true;
            
            try {
                const orders = await syncWithCloud();
                const order = orders.find(o => o.id === orderId);
                
                setTimeout(() => {
                    checkOrderBtn.innerHTML = originalText;
                    checkOrderBtn.disabled = false;
                    
                    if (order) {
                        displayOrderDetails(order, orderDetails);
                    } else {
                        showOrderNotFound(orderDetails);
                    }
                    
                    orderStatus.classList.add('active');
                }, 1000);
                
            } catch (error) {
                checkOrderBtn.innerHTML = originalText;
                checkOrderBtn.disabled = false;
                showNotification('Failed to check order status', 'error');
            }
        }

        function displayOrderDetails(order, orderDetails) {
            const itemsHtml = order.items.map(item => 
                `<div class="flex justify-between text-sm py-1">
                    <span>${item.name} x ${item.quantity}</span>
                    <span>NPR ${Math.round(item.price * item.quantity * 0.89)}</span>
                </div>`
            ).join('');
            
            const statusText = getStatusText(order.status);
            const statusClass = `status-${order.status}`;
            
            orderDetails.innerHTML = `
                <div class="space-y-3">
                    <div class="flex justify-between items-center">
                        <span><strong>Order ID:</strong> ${order.id}</span>
                        <span class="status-badge ${statusClass}">${statusText}</span>
                    </div>
                    <div><strong>Customer:</strong> ${order.customerName}</div>
                    <div><strong>Phone:</strong> ${order.phone}</div>
                    <div><strong>Address:</strong> ${order.address}</div>
                    <div class="border-t pt-2">
                        <strong>Order Items:</strong>
                        ${itemsHtml}
                        <div class="flex justify-between font-bold border-t mt-2 pt-2">
                            <span>Total:</span>
                            <span>NPR ${order.total}</span>
                        </div>
                    </div>
                    <div class="text-sm text-gray-500">
                        <strong>Order Time:</strong> ${formatOrderTime(order.timestamp)}
                    </div>
                    <div class="mt-4 p-3 bg-blue-50 rounded-lg text-sm">
                        <i class="fas fa-info-circle mr-2 text-blue-500"></i>
                        ${getStatusMessage(order.status)}
                    </div>
                </div>
            `;
        }

        function showOrderNotFound(orderDetails) {
            orderDetails.innerHTML = `
                <div class="text-center py-4">
                    <i class="fas fa-search text-3xl text-gray-300 mb-2"></i>
                    <p class="text-gray-600">Order not found</p>
                    <p class="text-sm text-gray-500 mt-1">Please check your order ID</p>
                </div>
            `;
        }

        function getStatusText(status) {
            const statusMap = {
                'pending': 'Pending', 'preparing': 'Preparing', 'ready': 'Ready for Delivery',
                'delivered': 'Delivered', 'cancelled': 'Cancelled'
            };
            return statusMap[status] || status;
        }

        function getStatusMessage(status) {
            const messages = {
                'pending': 'Your order has been received and is waiting to be confirmed. Please make sure you have sent the WhatsApp message.',
                'preparing': 'Your order is being prepared in our kitchen. Estimated delivery time: 30-45 minutes.',
                'ready': 'Your order is ready and will be delivered soon. Please be available to receive your order.',
                'delivered': 'Your order has been delivered. Thank you for choosing Mansara Taj!',
                'cancelled': 'This order has been cancelled. Please contact us if you have any questions.'
            };
            return messages[status] || 'Checking order status...';
        }

        function formatOrderTime(timestamp) {
            return new Date(timestamp).toLocaleString('en-US', {
                year: 'numeric', month: 'short', day: 'numeric',
                hour: '2-digit', minute: '2-digit', hour12: true
            });
        }

        // Make functions globally available for onclick handlers
        window.addToCart = addToCart;
        window.updateQuantity = updateQuantity;
        window.removeFromCart = removeFromCart;
        window.copyOrderId = copyOrderId;
    </script>
</body>
</html>
